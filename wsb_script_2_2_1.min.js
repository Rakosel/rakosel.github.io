var stopAll=!1,ra,rs,subwdeb=!1,lines_in,i,url,maOBJ,seOBJ,bmeOBJ,str_out="",str_out1="",uart_json={},temp_json={},input_lm75={},scrPos=0,ovShBtn0=!1,ast=0,ua_mode=0,tmranim=2E3,T_arr=[],P_arr=[],H_arr=[],temp_arr=[];T_arr=[0,1,2,4,5,16,17,20];H_arr=[3,8,9,18,19,21];P_arr=[6,7,12,13];var j_T=0,j_H=0,j_P=0,sds,mds,sets;sds=$(".sideset");mds=$(".macnt");sets=$(".setcnt");cnftmp=$(".scntf");function btn_otp_wr(){var b="/otp_mode?input="+encodeURIComponent("Wr345")+"&";fetch(b,"GET",txjstmp,30)}
function btn_sensor_rd(){var b=$("#btnsens_val").val(),g;if(1!=ast)for(g=0;g<b;g++){var d="/otp_mode?input="+encodeURIComponent("GiveMeas")+"&";fetch(d,"GET",txjstmp,50)}}function btn_otp_rd(){var b="/otp_mode?input="+encodeURIComponent("Rd345")+"&";fetch(b,"GET",txjstmp,30)}function refr_rtc(){0==subwdeb&&$("#autmp").prop("checked")&&(fetch("/get_rtc.json?n="+Math.random(),"GET",txjstmp,30),sub_grad())}
function btn_rtc_wr(){var b={rtc_set:[Math.floor(Date.now()/1E3),0,0]};fetch("/set_rtc.json?n="+encodeURIComponent(JSON.stringify(b))+"&","GET",txjstmp,10)}function btn_htu21d_Wr(){var b=$("#htu21d_ht option:selected").val(),g=$("#htu21d_m option:selected").val();$(".btns_htu21d").removeClass("badge-success");$(".btns_htu21d").removeClass("badge-danger");fetch("/input_htu21d.json?n="+encodeURIComponent(JSON.stringify({htu21d_conf:[g,b]}))+"&","GET",txjstmp,10)}
function btn_htu21d_Rd(){$(".btns_htu21d").removeClass("badge-success");$(".btns_htu21d").removeClass("badge-danger");fetch("/output_htu21d.json?n="+Math.random(),"GET",txjstmp,10)}
function btn_sht30_1_Wr(){var b=$("#sht30_ht option:selected").val(),g=$("#sht30_m option:selected").val(),d=$("#sht30_scr option:selected").val(),a=$("#sht30_rep option:selected").val(),c=$("#sht30_mps_sel option:selected").val();$(".btns_sht30").removeClass("badge-success");$(".btns_sht30").removeClass("badge-danger");input_sht30={sht30_conf:[b,g,d,a,c]};fetch("/input_sht30_1.json?n="+encodeURIComponent(JSON.stringify(input_sht30))+"&","GET",txjstmp,10)}
function btn_sht30_2_Wr(){var b=$("#sht31_ht option:selected").val(),g=$("#sht31_m option:selected").val(),d=$("#sht31_scr option:selected").val(),a=$("#sht31_rep option:selected").val(),c=$("#sht31_mps_sel option:selected").val();$(".btns_sht31").removeClass("badge-success");$(".btns_sht31").removeClass("badge-danger");input_sht31={sht31_conf:[b,g,d,a,c]};fetch("/input_sht30_2.json?n="+encodeURIComponent(JSON.stringify(input_sht31))+"&","GET",txjstmp,10)}
function btn_sht30_1_Rd(){$(".btns_sht30_1").removeClass("badge-success");$(".btns_sht30_1").removeClass("badge-danger");fetch("/output_sht30_1.json?n="+Math.random(),"GET",txjstmp,10)}function btn_sht30_2_Rd(){$(".btns_sht31").removeClass("badge-success");$(".btns_sht31").removeClass("badge-danger");fetch("/output_sht30_2.json?n="+Math.random(),"GET",txjstmp,10)}
function btn_bm280_1_Wr(){var b=$("#bm1s_m option:selected").val(),g=$("#bm1s_osrs option:selected").val(),d=$("#bm1s_f option:selected").val(),a=$("#bm1_t_st option:selected").val(),c=$("#bm_alt").val();$(".btns_bme280_1").removeClass("badge-success");$(".btns_bme280_1").removeClass("badge-danger");0==$.isNumeric(c)?$(".btns_bme280_1").addClass("badge-danger").text("\u041e\u0448\u0438\u0431\u043a\u0430 (\u0441\u043c\u043e\u0442\u0440\u0438 \u0432\u044b\u0448\u0435)"):(input_bme280={bme280_conf:[b,
g,d,a,c]},fetch("/input_bme280_1.json?n="+encodeURIComponent(JSON.stringify(input_bme280))+"&","GET",txjstmp,10))}
function btn_bm280_2_Wr(){var b=$("#bm2s_m option:selected").val(),g=$("#bm2s_osrs option:selected").val(),d=$("#bm2s_f option:selected").val(),a=$("#bm2_t_st option:selected").val(),c=$("#bm_alt").val();$(".btns_bme280_2").removeClass("badge-success");$(".btns_bme280_2").removeClass("badge-danger");0==$.isNumeric(c)?$(".btns_bme280_2").addClass("badge-danger").text("\u041e\u0448\u0438\u0431\u043a\u0430 (\u0441\u043c\u043e\u0442\u0440\u0438 \u0432\u044b\u0448\u0435)"):(input_bme280={bme280_conf:[b,
g,d,a,c]},fetch("/input_bme280_2.json?n="+encodeURIComponent(JSON.stringify(input_bme280))+"&","GET",txjstmp,10))}function btn_bm280_1_Rd(){$(".btns_bme280_1").removeClass("badge-success");$(".btns_bme280_1").removeClass("badge-danger");fetch("/output_bme280_1.json?n="+Math.random(),"GET",txjstmp,10)}function btn_bm280_2_Rd(){$(".btns_bme280_2").removeClass("badge-success");$(".btns_bme280_2").removeClass("badge-danger");fetch("/output_bme280_2.json?n="+Math.random(),"GET",txjstmp,10)}
function txjstmp(b,g){var d=$(".pst1"),a=$(".pst0"),c,f;if(200!=b)return a.removeClass("badge-success"),a.addClass("badge-danger"),a.text("\u041d\u0435\u0442 \u0441\u0432\u044f\u0437\u0438"),d.removeClass("badge-success"),d.addClass("badge-danger"),d.text("\u041d\u0435\u0442 \u0441\u0432\u044f\u0437\u0438"),$(".swdeb").removeAttr("disabled"),ftmpd(),0;a.removeClass("badge-danger");d.removeClass("badge-danger");a.addClass("badge-success");d.addClass("badge-success");a.text("\u041e\u041a ");d.text("\u041e\u041a ");
if("string"===typeof g)try{temp_json=JSON.parse(g)}catch(m){return ftvall(""),0}else return ftvall(""),0;if(temp_json.LM75_CMP)try{var e=parseInt(temp_json.LM75_CMP[0].trim(),10);var k=parseInt(temp_json.LM75_CMP[1].trim(),10);1==e?$("#lm75_t1_chk").prop("checked",!0):$("#lm75_t1_chk").prop("checked",!1);1==k?$("#lm75_t2_chk").prop("checked",!0):$("#lm75_t2_chk").prop("checked",!1)}catch(m){}temp_json.lm_75_1_cb&&("OK"==temp_json.lm_75_1_cb?$(".btns_lm75_1").addClass("badge-success").text("\u041e\u041a "):
$(".btns_lm75_1").addClass("badge-danger").text("\u041e\u0448\u0438\u0431\u043a\u0430 "));if(temp_json.lm75_1_ou)if(999!=parseInt(temp_json.lm75_1_ou[1].trim(),10)||999!=parseInt(temp_json.lm75_1_ou[0].trim(),10)){e=parseInt(temp_json.lm75_1_ou[1].trim(),10);k=parseInt(temp_json.lm75_1_ou[2].trim(),10);$(".lm75thy_1").text(e+" \u00b0C");$(".lm75tos_1").text(k+" \u00b0C");$("#lm75sc_1").val(e);$("#lm75so_1").val(k);e=parseInt(temp_json.lm75_1_ou[0].trim(),10);if($.isNumeric(e))for(a=0;4>=a;a++)e&1<<
a?$("#gLM75ch"+a.toString()).prop("checked",!0):$("#gLM75ch"+a.toString()).prop("checked",!1);$(".btns_lm75_1").addClass("badge-success").text("\u041e\u041a ")}else $(".btns_lm75_1").addClass("badge-danger").text("\u041e\u0448\u0438\u0431\u043a\u0430 ");if(temp_json.lm75_2_ou)if(999!=parseInt(temp_json.lm75_2_ou[1].trim(),10)||999!=parseInt(temp_json.lm75_2_ou[0].trim(),10)){e=parseInt(temp_json.lm75_2_ou[1].trim(),10);k=parseInt(temp_json.lm75_2_ou[2].trim(),10);$(".lm75thy_2").text(e+"\u00b0C");
$(".lm75tos_2").text(k+"\u00b0C");$("#lm75sc_2").val(e);$("#lm75so_2").val(k);e=parseInt(temp_json.lm75_2_ou[0].trim(),10);if($.isNumeric(e))for(a=0;4>=a;a++)e&1<<a?$("#gLM752ch"+a.toString()).prop("checked",!0):$("#gLM752ch"+a.toString()).prop("checked",!1);$(".btns_lm75_2").addClass("badge-success").text("\u041e\u041a ")}else $(".btns_lm75_2").addClass("badge-danger").text("\u041e\u0448\u0438\u0431\u043a\u0430 ");temp_json.lm_75_2_cb&&("OK"==temp_json.lm_75_2_cb?$(".btns_lm75_2").addClass("badge-success").text("\u041e\u041a "):
$(".btns_lm75_2").addClass("badge-danger").text("\u041e\u0448\u0438\u0431\u043a\u0430 "));temp_json.bme280_1_cb&&("OK"==temp_json.bme280_1_cb?$(".btns_bme280_1").addClass("badge-success").text("\u041e\u041a "):$(".btns_bme280_1").addClass("badge-danger").text("\u041e\u0448\u0438\u0431\u043a\u0430 "));temp_json.bme280_2_cb&&("OK"==temp_json.bme280_2_cb?$(".btns_bme280_2").addClass("badge-success").text("\u041e\u041a "):$(".btns_bme280_2").addClass("badge-danger").text("\u041e\u0448\u0438\u0431\u043a\u0430 "));
if(temp_json.GiveMeas_cb){ast=0;if("#ERR"==temp_json.GiveMeas_cb){ast=1;str_out1="";return}if("#OVF"==temp_json.GiveMeas_cb){ast=1;$("#esp_urx").val(str_out1+"#OVF");str_out1="";return}str_out1=$("#esp_urx").val().toString()+temp_json.GiveMeas_cb+"\n";$("#esp_urx").val(str_out1)}temp_json.Wr345_cb&&("OK"==temp_json.Wr345_cb?($(".btns_otp").removeClass("badge-danger"),$(".btns_otp").addClass("badge-success").text("\u041e\u041a ")):($(".btns_otp").removeClass("badge-success"),$(".btns_otp").addClass("badge-danger").text("\u041e\u0448\u0438\u0431\u043a\u0430 Wr345")));
temp_json.Rd345_cb&&("OK"==temp_json.Rd345_cb?($(".btns_otp").removeClass("badge-danger"),$(".btns_otp").addClass("badge-success").text("\u041e\u041a ")):($(".btns_otp").removeClass("badge-success"),$(".btns_otp").addClass("badge-danger").text("\u041e\u0448\u0438\u0431\u043a\u0430 Rd345")));temp_json.htu21d_cb&&("OK"==temp_json.htu21d_cb?$(".btns_htu21d").addClass("badge-success").text("\u041e\u041a "):$(".btns_htu21d").addClass("badge-danger").text("\u041e\u0448\u0438\u0431\u043a\u0430 "));temp_json.htu21d_conf&&
(999!=parseInt(temp_json.htu21d_conf[0],10)?($("#htu21d_st").val("0x"+Number(temp_json.htu21d_conf[0]).toString(16).toUpperCase()),parseInt(temp_json.htu21d_conf[0],10),$("#htu21d_m option").removeProp("selected"),$("#htu21d_ht option").removeProp("selected"),$("#htu21d_m [value="+temp_json.htu21d_conf[0]+"]").prop("selected","selected"),$("#htu21d_ht [value="+temp_json.htu21d_conf[1]+"]").prop("selected","selected"),$(".btns_htu21d").addClass("badge-success").text("\u041e\u041a ")):$(".btns_htu21d").addClass("badge-danger").text("\u041e\u0448\u0438\u0431\u043a\u0430 "));
temp_json.sht30_1_cb&&("OK"==temp_json.sht30_1_cb?$(".btns_sht30").addClass("badge-success").text("\u041e\u041a "):$(".btns_sht30").addClass("badge-danger").text("\u041e\u0448\u0438\u0431\u043a\u0430 "));temp_json.sht30_2_cb&&("OK"==temp_json.sht30_2_cb?$(".btns_sht31").addClass("badge-success").text("\u041e\u041a "):$(".btns_sht31").addClass("badge-danger").text("\u041e\u0448\u0438\u0431\u043a\u0430 "));temp_json.sht30_1_ou&&(999!=parseInt(temp_json.sht30_1_ou[0],10)?($("#sht30_st").val("0x"+Number(temp_json.sht30_1_ou[0].trim()).toString(16).toUpperCase()),
parseInt(temp_json.sht30_1_ou[0].trim(),10),$("#sht30_ht option").removeProp("selected"),$("#sht30_m option").removeProp("selected"),$("#sht30_scr option").removeProp("selected"),$("#sht30_rep option").removeProp("selected"),$("#sht30_mps_sel option").removeProp("selected"),$("#sht30_ht [value="+temp_json.sht30_1_ou[1]+"]").prop("selected","selected"),$("#sht30_m [value="+temp_json.sht30_1_ou[2]+"]").prop("selected","selected"),$("#sht30_rep [value="+temp_json.sht30_1_ou[3]+"]").prop("selected","selected"),
$("#sht30_mps_sel [value="+temp_json.sht30_1_ou[4]+"]").prop("selected","selected"),$("#sht30_scr [value="+temp_json.sht30_1_ou[5]+"]").prop("selected","selected"),$("#sht30_m").click(),$(".btns_sht30").addClass("badge-success").text("\u041e\u041a ")):$(".btns_sht30").addClass("badge-danger").text("\u041e\u0448\u0438\u0431\u043a\u0430 "));temp_json.sht30_2_ou&&(999!=parseInt(temp_json.sht30_2_ou[0],10)?($("#sht31_st").val("0x"+Number(temp_json.sht30_2_ou[0]).toString(16).toUpperCase()),parseInt(temp_json.sht30_2_ou[0],
10),$("#sht31_ht option").removeProp("selected"),$("#sht31_m option").removeProp("selected"),$("#sht31_scr option").removeProp("selected"),$("#sht31_rep option").removeProp("selected"),$("#sht31_mps_sel option").removeProp("selected"),$("#sht31_ht [value="+temp_json.sht30_2_ou[1]+"]").prop("selected","selected"),$("#sht31_m [value="+temp_json.sht30_2_ou[2]+"]").prop("selected","selected"),$("#sht31_rep [value="+temp_json.sht30_2_ou[3]+"]").prop("selected","selected"),$("#sht31_mps_sel [value="+temp_json.sht30_2_ou[4]+
"]").prop("selected","selected"),$("#sht31_scr [value="+temp_json.sht30_2_ou[5]+"]").prop("selected","selected"),$("#sht31_m").click(),$(".btns_sht31").addClass("badge-success").text("\u041e\u041a ")):$(".btns_sht31").addClass("badge-danger").text("\u041e\u0448\u0438\u0431\u043a\u0430 "));if(temp_json.bme280_1_ou)if(999!=parseInt(temp_json.bme280_1_ou[1],10)||999!=parseInt(temp_json.bme280_1_ou[0].trim(),10)){$("#bm1_ch").val("0x"+Number(temp_json.bme280_1_ou[0].trim()).toString(16).toUpperCase());
var h=parseInt(temp_json.bme280_1_ou[1],10);$("#bm1_st").val("0x"+Number(temp_json.bme280_1_ou[1].trim()).toString(16).toUpperCase());$.isNumeric(h)&&(h&1?$("#gBM2801ch0").prop("checked",!0):$("#gBM2801ch0").prop("checked",!1),h&8?$("#gBM2801ch3").prop("checked",!0):$("#gBM2801ch3").prop("checked",!1),$("#bm1s_m option").removeProp("selected"),$("#bm1s_osrs option").removeProp("selected"),$("#bm1s_f option").removeProp("selected"),$("#bm1_t_st option").removeProp("selected"),$("#bm1s_m [value="+temp_json.bme280_1_ou[2]+
"]").prop("selected","selected"),$("#bm1s_osrs [value="+temp_json.bme280_1_ou[3]+"]").prop("selected","selected"),$("#bm1s_f [value="+temp_json.bme280_1_ou[4]+"]").prop("selected","selected"),$("#bm1_t_st [value="+temp_json.bme280_1_ou[5]+"]").prop("selected","selected"),$(".btns_bme280_1").addClass("badge-success").text("\u041e\u041a "))}else $("#bm1_ch").val("\u041e\u0448\u0438\u0431\u043a\u0430"),$("#bm1_st").val("\u041e\u0448\u0438\u0431\u043a\u0430"),$(".btns_bme280_1").addClass("badge-danger").text("\u041e\u0448\u0438\u0431\u043a\u0430 ");
temp_json.bme280_2_ou&&(999!=parseInt(temp_json.bme280_2_ou[1],10)||999!=parseInt(temp_json.bme280_2_ou[0].trim(),10)?($("#bm2_ch").val("0x"+Number(temp_json.bme280_2_ou[0]).toString(16).toUpperCase().trim()),a=parseInt(temp_json.bme280_2_ou[1],10),$("#bm2_st").val("0x"+Number(temp_json.bme280_2_ou[1]).toString(16).toUpperCase().trim()),$.isNumeric(a)&&(a&1?$("#gBM2802ch0").prop("checked",!0):$("#gBM2802ch0").prop("checked",!1),h&8?$("#gBM2802ch3").prop("checked",!0):$("#gBM2802ch3").prop("checked",
!1),$("#bm2s_m option").removeProp("selected"),$("#bm2s_osrs option").removeProp("selected"),$("#bm2s_f option").removeProp("selected"),$("#bm2_t_st option").removeProp("selected"),$("#bm2s_m [value="+temp_json.bme280_2_ou[2]+"]").prop("selected","selected"),$("#bm2s_osrs [value="+temp_json.bme280_2_ou[3]+"]").prop("selected","selected"),$("#bm2s_f [value="+temp_json.bme280_2_ou[4]+"]").prop("selected","selected"),$("#bm2_t_st [value="+temp_json.bme280_2_ou[5]+"]").prop("selected","selected"),$(".btns_bme280_2").addClass("badge-success").text("\u041e\u041a "))):
($("#bm2_ch").val("\u041e\u0448\u0438\u0431\u043a\u0430"),$("#bm2_st").val("\u041e\u0448\u0438\u0431\u043a\u0430"),$(".btns_bme280_2").addClass("badge-danger").text("\u041e\u0448\u0438\u0431\u043a\u0430 ")));h=1;e=0;if(temp_json.temp){var l=f=c=j_P=j_H=j_T=0;for(a=3;a<=maOBJ.length&&a-3<=temp_json.temp.length;a++)"#ERR"==temp_json.temp[a-3]||""==temp_json.temp[a-3]||NaN==parseFloat(temp_json.temp[a-3])?tmpvloff(a):(tmpvlon(a),e<T_arr.length&&NaN!=parseFloat(temp_json.temp[T_arr[e]])&&"#ERR"!=temp_json.temp[T_arr[e]]&&
(k=parseFloat(temp_json.temp[T_arr[e]]),h=0>k?-1:h*h,j_T+=Math.abs(k),c++),e<H_arr.length&&NaN!=parseFloat(temp_json.temp[H_arr[e]])&&"#ERR"!=temp_json.temp[H_arr[e]]&&(99<=parseFloat(temp_json.temp[H_arr[e]])||(j_H=3==H_arr[e]?j_H+(parseFloat(temp_json.temp[H_arr[e]])-9.5):j_H+parseFloat(temp_json.temp[H_arr[e]])),f++),e<P_arr.length&&NaN!=parseFloat(temp_json.temp[P_arr[e]])&&"#ERR"!=temp_json.temp[P_arr[e]]&&(j_P+=parseFloat(temp_json.temp[P_arr[e]]),l++),e++),$("#"+maOBJ[a].name).val(temp_json.temp[a-
3]);j_T=j_T*h/c;j_H/=f;j_P/=l}NaN==j_T?tmpvloff(0):tmpvlon(0);NaN==j_P?tmpvloff(1):tmpvlon(1);NaN==j_H?tmpvloff(2):tmpvlon(2);$("#tm_adc").removeClass("is-invalid").html();$("#tm_adc").removeClass("is-valid").html();temp_json.temt_adc&&($("#tm_adc").val(temp_json.temt_adc),""==temp_json.temt_adc||"#ERR"==temp_json.temt_adc?$("#tm_adc").addClass("is-invalid").html():$("#tm_adc").addClass("is-valid").html());h=parseFloat($("#htu21_t").val());a=parseFloat($("#htu21_h").val());e=1.359*Math.pow(10,8)*
Math.pow(10,-1762.39/(h+235.66));h=(133.32*e/1E3).toString();$("#htu21_pp").val(h.substring(0,5));a=(-(1762.39/(Math.log(.01*a*e)-8.1332)+235.66)).toString();$("#htu21_dew").val(a.substring(0,5));if("NaN"==h||"NaN"==a||""==h||""==a)$("#htu21_dew").removeClass("is-invalid").html(),$("#htu21_dew").removeClass("is-valid").html(),$("#htu21_dew").addClass("is-invalid").html(),$("#htu21_pp").removeClass("is-invalid").html(),$("#htu21_pp").removeClass("is-valid").html(),$("#htu21_pp").addClass("is-invalid").html();
$("#htu21_dew").removeClass("is-invalid").html();$("#htu21_dew").removeClass("is-valid").html();$("#htu21_dew").addClass("is-valid").html();$("#htu21_pp").removeClass("is-invalid").html();$("#htu21_pp").removeClass("is-valid").html();$("#htu21_pp").addClass("is-valid").html();temp_json.debug&&("ON"==temp_json.debug?(sdmc_sh(),d.removeClass("badge-warning"),d.addClass("badge-success"),d.text("\u0412\u041a\u041b")):"OFF"==temp_json.debug?(sdmc_rm(),d.removeClass("badge-success"),d.addClass("badge-warning"),
d.text("\u0412\u042b\u041a\u041b")):(d.removeClass("badge-success"),d.addClass("badge-danger"),d.text("\u041d\u0415\u0422 \u0421\u0412\u042f\u0417\u0418")),$(".swdeb").removeAttr("disabled"));if(temp_json.rtc_get){a=0;for(a in temp_json.rtc_get)str_out+=temp_json.rtc_get[a]+"-";$(".ptime").text(str_out.substring(0,str_out.length-1))}str_out=""}
function tmpvlon(b){$("#"+maOBJ[b].name).removeClass("is-invalid").html();$("#"+maOBJ[b].name).removeClass("is-valid").html();$("#"+maOBJ[b].name).addClass("is-valid").html()}function tmpvloff(b){$("#"+maOBJ[b].name).removeClass("is-invalid").html();$("#"+maOBJ[b].name).removeClass("is-valid").html();$("#"+maOBJ[b].name).addClass("is-invalid").html()}
function sdmc_sh(){mds.removeClass("collapse show");mds.addClass("collapse hide");sds.removeClass("collapse hide");sds.addClass("collapse show");sets.removeClass("collapse hide");sets.addClass("collapse show")}function sdmc_rm(){mds.removeClass("collapse hide");mds.addClass("collapse show");sds.removeClass("collapse show");sds.addClass("collapse hide");sets.removeClass("collapse show");sets.addClass("collapse hide")}
function ftvall(b){for(i=0;i<maOBJ.length;i++)$("#"+maOBJ[i].name).val(b),$("#"+maOBJ[i].name).removeClass("is-invalid").html(),$("#"+maOBJ[i].name).removeClass("is-valid").html()}function ftmpd(){for(i=0;i<maOBJ.length;i++)$("#"+maOBJ[i].name).removeClass("is-invalid").html(),$("#"+maOBJ[i].name).removeClass("is-valid").html()}function spt0(){return $("#esp_tx").val().replace(/^[\n]+$/g,"").split(/[\n]+/)}function smgh(){device.mobile()||$(".bt0st").click()}$(".bt0st1").click(function(){$(".bt0st").click()});
function erxclr_uart(){$("#esp_tx").val("")}function etxclr_uart(){$("#esp_urx").val("");str_out1=""}$(".bt0st").click(function(){ast=$(".bt0st").attr("value");device.mobile()?"on"!=ast?($(".bt0st").attr("value","on"),rm_b(),rms_b(),shs_b()):($(".bt0st").attr("value","off"),rm_b(),rms_b(),sh_b()):"on"!=ast?($(".bt0st").attr("value","on"),rm_b(),sh_b()):($(".bt0st").attr("value","off"),rm_b())});
function rm_b(){$(".mc1").removeClass("col-md-8 col-xl-8").html();$(".bsn0").removeClass("col-md-4 col-xl-4").html();$(".mc1").removeClass("noscroll collapse hide");$(".mc1").addClass("col-12").html()}function sh_b(){$(".mc1").remove("col-12").html();$(".mc1").addClass("col-md-8 col-xl-8").html();$(".bsn0").addClass("col-md-4 col-xl-4").html()}function rms_b(){$(".bsn0").removeClass("col-12 overlay").html();$(".mc1").removeClass("noscroll collapse hide")}
function shs_b(){$(".bsn0").addClass("col-12 overlay").html();$(".mc1").addClass("noscroll collapse hide").html()}
$(".swdeb").click(function(){1==this.checked?($(".swdebl").text("\u0412\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0440\u0435\u0436\u0438\u043c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),this.setAttribute("disabled","true"),sdeb("ON"),subwdeb=!0):($(".swdebl").text("\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0440\u0435\u0436\u0438\u043c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),this.setAttribute("disabled","false"),sdeb("OFF"),subwdeb=!1)});
function sdeb(b){b="/debug_mode?input="+encodeURIComponent(b)+"&";fetch(b,"GET",txjstmp,10)}function clbtn0(){ast=$(".bt0st").attr("value");device.mobile()&&("on"!=ast?(shs_b(),sh_b()):(rms_b(),rm_b()),$(".bt0st").click())}$(window).resize(function(){clresf()});function clresf(){ast=$(".bt0st").attr("value");device.mobile()?"on"==ast?(rms_b(),shs_b()):rms_b():"on"==ast?(rm_b(),sh_b()):rm_b()}
function fetch(b,g,d,a){var c=new XMLHttpRequest;c.onloadend=function(){d(c.status,c.responseText)};c.ontimeout=function(){d(-1,null)};c.open(g,b,!0);c.setRequestHeader("Accept","application/json");c.timeout=200*a;c.send()}function btn_lm75_1s(){$(".btns_lm75_1").removeClass("badge-danger");$(".btns_lm75_1").removeClass("badge-success");fetch("/output_lm75_1.json?n="+Math.random(),"GET",txjstmp,10)}
function btn_lm75_2s(){$(".btns_lm75_2").removeClass("badge-danger");$(".btns_lm75_2").removeClass("badge-success");fetch("/output_lm75_2.json?n="+Math.random(),"GET",txjstmp,10)}
function btn_lm75_1(){var b,g=0,d=$("#lm75sc_1"),a=$("#lm75so_1");for(b=0;5>b&&void 0!=$("#gLM75ch"+b).val();++b)$("#gLM75ch"+b).prop("checked")&&(g|=1<<b);var c=d.val();var f=a.val();f>c&&0>f&&0>c?c=f=c:f>c&&(b=f,f=c,c=b);c==f&&(0>f&&0>c?f--:c++);d.val(f);a.val(c);$(".lm75thy_1").text(d.val()+" C\u00b0");$(".lm75tos_1").text(a.val()+" C\u00b0");f=parseInt(d.val());c=parseInt(a.val());fetch("/input_lm75_1.json?n="+encodeURIComponent(JSON.stringify({lm75_conf:[g,2*f,2*c]}))+"&","GET",txjstmp,10)}
function btn_lm75_2(){var b,g=0,d=$("#lm75sc_2"),a=$("#lm75so_2");for(b=0;5>b&&void 0!=$("#gLM752ch"+b).val();++b)$("#gLM752ch"+b).prop("checked")&&(g|=1<<b);var c=d.val();var f=a.val();f>c&&0>f&&0>c?c=f=c:f>c&&(b=f,f=c,c=b);c==f&&(0>f&&0>c?f--:c++);d.val(f);a.val(c);$(".lm75thy_2").text(d.val()+" C\u00b0");$(".lm75tos_2").text(a.val()+" C\u00b0");f=parseInt(d.val());c=parseInt(a.val());fetch("/input_lm75_2.json?n="+encodeURIComponent(JSON.stringify({lm75_conf:[g,2*f,2*c]}))+"&","GET",txjstmp,10)}
function sub_grad(){maOBJ=$("#tmpo").serializeArray();fetch("/temp_out.json?n="+Math.random(),"GET",txjstmp,10);$("#temperature").val(j_T.toString().substring(0,6));$("#humudity").val(j_H.toString().substring(0,6));$("#pressure").val(j_P.toString().substring(0,6))}
function submit_uart(){$("#btn1").prop("disabled",!0);lines_in=spt0();url="";uart_json.uart_out="null";ua_mode=$("#uart_get_ch").prop("checked")?1:0;for(i=0;i<lines_in.length;i++)uart_json.uart_in=lines_in[i],1==ua_mode?fetch("/uart_get?input="+encodeURIComponent(lines_in[i])+"&","GET",txjs_ua,10):fetch("/uart.json?n="+encodeURIComponent(JSON.stringify(uart_json))+"&","GET",txjs_ua,10)}
function txjs_ua(b,g){seOBJ=$("#scntf").serializeArray();$("#btn1").prop("disabled",!1);if(200!=b)str_out1+="Send command error\n";else{if("string"===typeof g)try{uart_json=JSON.parse(g)}catch(a){return 0}else uart_json.uart_out="null",uart_json.uart_in="null";str_out1=""==uart_json.uart_out?str_out1+"ACK\n":str_out1+(uart_json.uart_out+"\n")}var d=$("#esp_urx");""!=d.val()?d.val(d.val()+str_out1):d.val(str_out1);str_out1=""}
window.onload=function(){$(".bt0st").attr("value","off");$(".navia").addClass("list-group-item list-group-item-action bg-light border");$("#esp_tx").val("wsbuser.prints(node.heap());");$("#esp_urx").val("");rs=setInterval(refr_rtc,3E3);i=0;smgh()};
