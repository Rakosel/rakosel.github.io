var ra,rs,lines_in,i,url,maOBJ,seOBJ,bmeOBJ,stopAll=!1,subwdeb=!1,str_out="",str_out1="",uart_json={},temp_json={},input_lm75={},scrPos=0,ovShBtn0=!1,ast=0,ua_mode=0,tmranim=2e3;let T_arr=new Array,P_arr=new Array,H_arr=new Array,temp_arr=new Array;T_arr=[0,1,2,4,5,16,17,20],H_arr=[3,8,9,18,19,21],P_arr=[6,7,12,13];var sds,mds,sets,j_T=0,j_H=0,j_P=0;function btn_otp_wr(){fetch("/otp_mode?input="+encodeURIComponent("Wr345")+"&","GET",txjstmp,30)}function btn_sensor_rd(){var e=$("#btnsens_val").val(),t=0;if(1!=ast)for(t=0;t<e;t++)fetch("/otp_mode?input="+encodeURIComponent("GiveMeas")+"&","GET",txjstmp,50)}function btn_otp_rd(){fetch("/otp_mode?input="+encodeURIComponent("Rd345")+"&","GET",txjstmp,30)}function refr_rtc(){0==subwdeb&&$("#autmp").prop("checked")&&(fetch("/get_rtc.json?n="+Math.random(),"GET",txjstmp,30),sub_grad())}function btn_rtc_wr(){var e={rtc_set:[Math.floor(Date.now()/1e3),0,0]};fetch("/set_rtc.json?n="+encodeURIComponent(JSON.stringify(e))+"&","GET",txjstmp,10)}function btn_htu21d_Wr(){var e=$("#htu21d_ht option:selected").val(),t=$("#htu21d_m option:selected").val();$(".btns_htu21d").removeClass("badge-success"),$(".btns_htu21d").removeClass("badge-danger");e={htu21d_conf:[t,e]};fetch("/input_htu21d.json?n="+encodeURIComponent(JSON.stringify(e))+"&","GET",txjstmp,10)}function btn_htu21d_Rd(){$(".btns_htu21d").removeClass("badge-success"),$(".btns_htu21d").removeClass("badge-danger"),fetch("/output_htu21d.json?n="+Math.random(),"GET",txjstmp,10)}function btn_sht30_1_Wr(){var e=$("#sht30_ht option:selected").val(),t=$("#sht30_m option:selected").val(),s=$("#sht30_scr option:selected").val(),o=$("#sht30_rep option:selected").val(),_=$("#sht30_mps_sel option:selected").val();$(".btns_sht30").removeClass("badge-success"),$(".btns_sht30").removeClass("badge-danger"),input_sht30={sht30_conf:[e,t,s,o,_]},fetch("/input_sht30_1.json?n="+encodeURIComponent(JSON.stringify(input_sht30))+"&","GET",txjstmp,10)}function btn_sht30_2_Wr(){var e=$("#sht31_ht option:selected").val(),t=$("#sht31_m option:selected").val(),s=$("#sht31_scr option:selected").val(),o=$("#sht31_rep option:selected").val(),_=$("#sht31_mps_sel option:selected").val();$(".btns_sht31").removeClass("badge-success"),$(".btns_sht31").removeClass("badge-danger"),input_sht31={sht31_conf:[e,t,s,o,_]},fetch("/input_sht30_2.json?n="+encodeURIComponent(JSON.stringify(input_sht31))+"&","GET",txjstmp,10)}function btn_sht30_1_Rd(){$(".btns_sht30_1").removeClass("badge-success"),$(".btns_sht30_1").removeClass("badge-danger"),fetch("/output_sht30_1.json?n="+Math.random(),"GET",txjstmp,10)}function btn_sht30_2_Rd(){$(".btns_sht31").removeClass("badge-success"),$(".btns_sht31").removeClass("badge-danger"),fetch("/output_sht30_2.json?n="+Math.random(),"GET",txjstmp,10)}function btn_bm280_1_Wr(){var e=$("#bm1s_m option:selected").val(),t=$("#bm1s_osrs option:selected").val(),s=$("#bm1s_f option:selected").val(),o=$("#bm1_t_st option:selected").val(),_=$("#bm_alt").val();$(".btns_bme280_1").removeClass("badge-success"),$(".btns_bme280_1").removeClass("badge-danger"),0!=$.isNumeric(_)?(input_bme280={bme280_conf:[e,t,s,o,_]},fetch("/input_bme280_1.json?n="+encodeURIComponent(JSON.stringify(input_bme280))+"&","GET",txjstmp,10)):$(".btns_bme280_1").addClass("badge-danger").text("Ошибка (смотри выше)")}function btn_bm280_2_Wr(){var e=$("#bm2s_m option:selected").val(),t=$("#bm2s_osrs option:selected").val(),s=$("#bm2s_f option:selected").val(),o=$("#bm2_t_st option:selected").val(),_=$("#bm_alt").val();$(".btns_bme280_2").removeClass("badge-success"),$(".btns_bme280_2").removeClass("badge-danger"),0!=$.isNumeric(_)?(input_bme280={bme280_conf:[e,t,s,o,_]},fetch("/input_bme280_2.json?n="+encodeURIComponent(JSON.stringify(input_bme280))+"&","GET",txjstmp,10)):$(".btns_bme280_2").addClass("badge-danger").text("Ошибка (смотри выше)")}function btn_bm280_1_Rd(){$(".btns_bme280_1").removeClass("badge-success"),$(".btns_bme280_1").removeClass("badge-danger"),fetch("/output_bme280_1.json?n="+Math.random(),"GET",txjstmp,10)}function btn_bm280_2_Rd(){$(".btns_bme280_2").removeClass("badge-success"),$(".btns_bme280_2").removeClass("badge-danger"),fetch("/output_bme280_2.json?n="+Math.random(),"GET",txjstmp,10)}function txjstmp(e,t){var s,o=$(".pst1"),_=$(".pst0"),a=0,n=0,m=1,l=1,r=1;if(200!=e)return _.removeClass("badge-success"),_.addClass("badge-danger"),_.text("Нет связи"),o.removeClass("badge-success"),o.addClass("badge-danger"),o.text("Нет связи"),$(".swdeb").removeAttr("disabled"),ftmpd(),0;if(_.removeClass("badge-danger"),o.removeClass("badge-danger"),_.addClass("badge-success"),o.addClass("badge-success"),_.text("ОК "),o.text("ОК "),"string"!=typeof t)return ftvall(""),0;try{temp_json=JSON.parse(t)}catch(e){return ftvall(""),0}if(temp_json.LM75_CMP)try{var d=parseInt(temp_json.LM75_CMP[0].trim(),10),p=parseInt(temp_json.LM75_CMP[1].trim(),10);1==d?$("#lm75_t1_chk").prop("checked",!0):$("#lm75_t1_chk").prop("checked",!1),1==p?$("#lm75_t2_chk").prop("checked",!0):$("#lm75_t2_chk").prop("checked",!1)}catch(e){}if(temp_json.lm_75_1_cb&&("OK"==temp_json.lm_75_1_cb?$(".btns_lm75_1").addClass("badge-success").text("ОК "):$(".btns_lm75_1").addClass("badge-danger").text("Ошибка ")),temp_json.lm75_1_ou)if(999!=parseInt(temp_json.lm75_1_ou[1].trim(),10)||999!=parseInt(temp_json.lm75_1_ou[0].trim(),10)){d=parseInt(temp_json.lm75_1_ou[1].trim(),10),p=parseInt(temp_json.lm75_1_ou[2].trim(),10);$(".lm75thy_1").text(d+" °C"),$(".lm75tos_1").text(p+" °C"),$("#lm75sc_1").val(d),$("#lm75so_1").val(p);var c=parseInt(temp_json.lm75_1_ou[0].trim(),10),i=0;if($.isNumeric(c))for(i=0;i<=4;i++)c&1<<i?$("#gLM75ch"+i.toString()).prop("checked",!0):$("#gLM75ch"+i.toString()).prop("checked",!1);$(".btns_lm75_1").addClass("badge-success").text("ОК ")}else $(".btns_lm75_1").addClass("badge-danger").text("Ошибка ");if(temp_json.lm75_2_ou)if(999!=parseInt(temp_json.lm75_2_ou[1].trim(),10)||999!=parseInt(temp_json.lm75_2_ou[0].trim(),10)){d=parseInt(temp_json.lm75_2_ou[1].trim(),10),p=parseInt(temp_json.lm75_2_ou[2].trim(),10);$(".lm75thy_2").text(d+"°C"),$(".lm75tos_2").text(p+"°C"),$("#lm75sc_2").val(d),$("#lm75so_2").val(p);c=parseInt(temp_json.lm75_2_ou[0].trim(),10),i=0;if($.isNumeric(c))for(i=0;i<=4;i++)c&1<<i?$("#gLM752ch"+i.toString()).prop("checked",!0):$("#gLM752ch"+i.toString()).prop("checked",!1);$(".btns_lm75_2").addClass("badge-success").text("ОК ")}else $(".btns_lm75_2").addClass("badge-danger").text("Ошибка ");if(temp_json.lm_75_2_cb&&("OK"==temp_json.lm_75_2_cb?$(".btns_lm75_2").addClass("badge-success").text("ОК "):$(".btns_lm75_2").addClass("badge-danger").text("Ошибка ")),temp_json.bme280_1_cb&&("OK"==temp_json.bme280_1_cb?$(".btns_bme280_1").addClass("badge-success").text("ОК "):$(".btns_bme280_1").addClass("badge-danger").text("Ошибка ")),temp_json.bme280_2_cb&&("OK"==temp_json.bme280_2_cb?$(".btns_bme280_2").addClass("badge-success").text("ОК "):$(".btns_bme280_2").addClass("badge-danger").text("Ошибка ")),temp_json.GiveMeas_cb){if(ast=0,"#ERR"==temp_json.GiveMeas_cb)return ast=1,void(str_out1="");if("#OVF"==temp_json.GiveMeas_cb)return ast=1,$("#esp_urx").val(str_out1+"#OVF"),void(str_out1="");str_out1=$("#esp_urx").val().toString()+temp_json.GiveMeas_cb+"\n",$("#esp_urx").val(str_out1)}if(temp_json.Wr345_cb&&("OK"==temp_json.Wr345_cb?($(".btns_otp").removeClass("badge-danger"),$(".btns_otp").addClass("badge-success").text("ОК ")):($(".btns_otp").removeClass("badge-success"),$(".btns_otp").addClass("badge-danger").text("Ошибка Wr345"))),temp_json.Rd345_cb&&("OK"==temp_json.Rd345_cb?($(".btns_otp").removeClass("badge-danger"),$(".btns_otp").addClass("badge-success").text("ОК ")):($(".btns_otp").removeClass("badge-success"),$(".btns_otp").addClass("badge-danger").text("Ошибка Rd345"))),temp_json.htu21d_cb&&("OK"==temp_json.htu21d_cb?$(".btns_htu21d").addClass("badge-success").text("ОК "):$(".btns_htu21d").addClass("badge-danger").text("Ошибка ")),temp_json.htu21d_conf&&(999!=parseInt(temp_json.htu21d_conf[0],10)?($("#htu21d_st").val("0x"+Number(temp_json.htu21d_conf[0]).toString(16).toUpperCase()),parseInt(temp_json.htu21d_conf[0],10),$("#htu21d_m option").removeProp("selected"),$("#htu21d_ht option").removeProp("selected"),$("#htu21d_m [value="+temp_json.htu21d_conf[0]+"]").prop("selected","selected"),$("#htu21d_ht [value="+temp_json.htu21d_conf[1]+"]").prop("selected","selected"),$(".btns_htu21d").addClass("badge-success").text("ОК ")):$(".btns_htu21d").addClass("badge-danger").text("Ошибка ")),temp_json.sht30_1_cb&&("OK"==temp_json.sht30_1_cb?$(".btns_sht30").addClass("badge-success").text("ОК "):$(".btns_sht30").addClass("badge-danger").text("Ошибка ")),temp_json.sht30_2_cb&&("OK"==temp_json.sht30_2_cb?$(".btns_sht31").addClass("badge-success").text("ОК "):$(".btns_sht31").addClass("badge-danger").text("Ошибка ")),temp_json.sht30_1_ou&&(999!=parseInt(temp_json.sht30_1_ou[0],10)?($("#sht30_st").val("0x"+Number(temp_json.sht30_1_ou[0].trim()).toString(16).toUpperCase()),parseInt(temp_json.sht30_1_ou[0].trim(),10),$("#sht30_ht option").removeProp("selected"),$("#sht30_m option").removeProp("selected"),$("#sht30_scr option").removeProp("selected"),$("#sht30_rep option").removeProp("selected"),$("#sht30_mps_sel option").removeProp("selected"),$("#sht30_ht [value="+temp_json.sht30_1_ou[1]+"]").prop("selected","selected"),$("#sht30_m [value="+temp_json.sht30_1_ou[2]+"]").prop("selected","selected"),$("#sht30_rep [value="+temp_json.sht30_1_ou[3]+"]").prop("selected","selected"),$("#sht30_mps_sel [value="+temp_json.sht30_1_ou[4]+"]").prop("selected","selected"),$("#sht30_scr [value="+temp_json.sht30_1_ou[5]+"]").prop("selected","selected"),$("#sht30_m").click(),$(".btns_sht30").addClass("badge-success").text("ОК ")):$(".btns_sht30").addClass("badge-danger").text("Ошибка ")),temp_json.sht30_2_ou&&(999!=parseInt(temp_json.sht30_2_ou[0],10)?($("#sht31_st").val("0x"+Number(temp_json.sht30_2_ou[0]).toString(16).toUpperCase()),parseInt(temp_json.sht30_2_ou[0],10),$("#sht31_ht option").removeProp("selected"),$("#sht31_m option").removeProp("selected"),$("#sht31_scr option").removeProp("selected"),$("#sht31_rep option").removeProp("selected"),$("#sht31_mps_sel option").removeProp("selected"),$("#sht31_ht [value="+temp_json.sht30_2_ou[1]+"]").prop("selected","selected"),$("#sht31_m [value="+temp_json.sht30_2_ou[2]+"]").prop("selected","selected"),$("#sht31_rep [value="+temp_json.sht30_2_ou[3]+"]").prop("selected","selected"),$("#sht31_mps_sel [value="+temp_json.sht30_2_ou[4]+"]").prop("selected","selected"),$("#sht31_scr [value="+temp_json.sht30_2_ou[5]+"]").prop("selected","selected"),$("#sht31_m").click(),$(".btns_sht31").addClass("badge-success").text("ОК ")):$(".btns_sht31").addClass("badge-danger").text("Ошибка ")),temp_json.bme280_1_ou&&(999!=parseInt(temp_json.bme280_1_ou[1],10)||999!=parseInt(temp_json.bme280_1_ou[0].trim(),10)?($("#bm1_ch").val("0x"+Number(temp_json.bme280_1_ou[0].trim()).toString(16).toUpperCase()),u=parseInt(temp_json.bme280_1_ou[1],10),$("#bm1_st").val("0x"+Number(temp_json.bme280_1_ou[1].trim()).toString(16).toUpperCase()),$.isNumeric(u)&&(1&u?$("#gBM2801ch0").prop("checked",!0):$("#gBM2801ch0").prop("checked",!1),8&u?$("#gBM2801ch3").prop("checked",!0):$("#gBM2801ch3").prop("checked",!1),$("#bm1s_m option").removeProp("selected"),$("#bm1s_osrs option").removeProp("selected"),$("#bm1s_f option").removeProp("selected"),$("#bm1_t_st option").removeProp("selected"),$("#bm1s_m [value="+temp_json.bme280_1_ou[2]+"]").prop("selected","selected"),$("#bm1s_osrs [value="+temp_json.bme280_1_ou[3]+"]").prop("selected","selected"),$("#bm1s_f [value="+temp_json.bme280_1_ou[4]+"]").prop("selected","selected"),$("#bm1_t_st [value="+temp_json.bme280_1_ou[5]+"]").prop("selected","selected"),$(".btns_bme280_1").addClass("badge-success").text("ОК "))):($("#bm1_ch").val("Ошибка"),$("#bm1_st").val("Ошибка"),$(".btns_bme280_1").addClass("badge-danger").text("Ошибка "))),temp_json.bme280_2_ou&&(999!=parseInt(temp_json.bme280_2_ou[1],10)||999!=parseInt(temp_json.bme280_2_ou[0].trim(),10)?($("#bm2_ch").val("0x"+Number(temp_json.bme280_2_ou[0]).toString(16).toUpperCase().trim()),b=parseInt(temp_json.bme280_2_ou[1],10),$("#bm2_st").val("0x"+Number(temp_json.bme280_2_ou[1]).toString(16).toUpperCase().trim()),$.isNumeric(b)&&(1&b?$("#gBM2802ch0").prop("checked",!0):$("#gBM2802ch0").prop("checked",!1),8&u?$("#gBM2802ch3").prop("checked",!0):$("#gBM2802ch3").prop("checked",!1),$("#bm2s_m option").removeProp("selected"),$("#bm2s_osrs option").removeProp("selected"),$("#bm2s_f option").removeProp("selected"),$("#bm2_t_st option").removeProp("selected"),$("#bm2s_m [value="+temp_json.bme280_2_ou[2]+"]").prop("selected","selected"),$("#bm2s_osrs [value="+temp_json.bme280_2_ou[3]+"]").prop("selected","selected"),$("#bm2s_f [value="+temp_json.bme280_2_ou[4]+"]").prop("selected","selected"),$("#bm2_t_st [value="+temp_json.bme280_2_ou[5]+"]").prop("selected","selected"),$(".btns_bme280_2").addClass("badge-success").text("ОК "))):($("#bm2_ch").val("Ошибка"),$("#bm2_st").val("Ошибка"),$(".btns_bme280_2").addClass("badge-danger").text("Ошибка "))),a=1,n=0,temp_json.temp){for(j_P=j_H=j_T=0,r=l=m=2,i=3;i<=maOBJ.length&&i-3<=temp_json.temp.length;i++)("#ERR"==temp_json.temp[i-3]||""==temp_json.temp[i-3]||NaN==temp_json.temp[i-3]?tmpvloff:tmpvlon)(i),n<T_arr.length&&NaN!=parseFloat(temp_json.temp[T_arr[n]])&&((s=parseFloat(temp_json.temp[T_arr[n]]))<0?a=-1:a*=a,j_T+=Math.abs(s),m++),n<H_arr.length&&NaN!=parseFloat(temp_json.temp[H_arr[n]])&&(j_H+=parseFloat(temp_json.temp[H_arr[n]]),l++),n<P_arr.length&&NaN!=parseFloat(temp_json.temp[P_arr[n]])&&(j_P+=parseFloat(temp_json.temp[P_arr[n]]),r++),n++,$("#"+maOBJ[i].name).val(temp_json.temp[i-3]);j_T=j_T*a/m,j_H/=l,j_P/=r}tmpvloff(0),tmpvloff(1),tmpvloff(2),(NaN==j_T?tmpvloff:tmpvlon)(0),(NaN==j_P?tmpvloff:tmpvlon)(1),(NaN==j_H?tmpvloff:tmpvlon)(2),$("#tm_adc").removeClass("is-invalid").html(),$("#tm_adc").removeClass("is-valid").html(),temp_json.temt_adc&&($("#tm_adc").val(temp_json.temt_adc),(""==temp_json.temt_adc||"#ERR"==temp_json.temt_adc?$("#tm_adc").addClass("is-invalid"):$("#tm_adc").addClass("is-valid")).html());var _=parseFloat($("#htu21_t").val()),b=parseFloat($("#htu21_h").val()),u=1.359*Math.pow(10,8)*Math.pow(10,-1762.39/(_+235.66)),_=(133.32*u/1e3).toString();$("#htu21_pp").val(_.substring(0,5));u=(-(1762.39/(Math.log(b*(.01*u))-8.1332)+235.66)).toString();if($("#htu21_dew").val(u.substring(0,5)),"NaN"!=_&&"NaN"!=u&&""!=_&&""!=u||($("#htu21_dew").removeClass("is-invalid").html(),$("#htu21_dew").removeClass("is-valid").html(),$("#htu21_dew").addClass("is-invalid").html(),$("#htu21_pp").removeClass("is-invalid").html(),$("#htu21_pp").removeClass("is-valid").html(),$("#htu21_pp").addClass("is-invalid").html()),$("#htu21_dew").removeClass("is-invalid").html(),$("#htu21_dew").removeClass("is-valid").html(),$("#htu21_dew").addClass("is-valid").html(),$("#htu21_pp").removeClass("is-invalid").html(),$("#htu21_pp").removeClass("is-valid").html(),$("#htu21_pp").addClass("is-valid").html(),temp_json.debug&&("ON"==temp_json.debug?(sdmc_sh(),o.removeClass("badge-warning"),o.addClass("badge-success"),o.text("ВКЛ")):"OFF"==temp_json.debug?(sdmc_rm(),o.removeClass("badge-success"),o.addClass("badge-warning"),o.text("ВЫКЛ")):(o.removeClass("badge-success"),o.addClass("badge-danger"),o.text("НЕТ СВЯЗИ")),$(".swdeb").removeAttr("disabled")),temp_json.rtc_get){for(i in i=0,temp_json.rtc_get)str_out+=temp_json.rtc_get[i]+"-";$(".ptime").text(str_out.substring(0,str_out.length-1))}str_out=""}function tmpvlon(e){$("#"+maOBJ[e].name).removeClass("is-invalid").html(),$("#"+maOBJ[e].name).removeClass("is-valid").html(),$("#"+maOBJ[e].name).addClass("is-valid").html()}function tmpvloff(e){$("#"+maOBJ[e].name).removeClass("is-invalid").html(),$("#"+maOBJ[e].name).removeClass("is-valid").html(),$("#"+maOBJ[e].name).addClass("is-invalid").html()}function sdmc_sh(){mds.removeClass("collapse show"),mds.addClass("collapse hide"),sds.removeClass("collapse hide"),sds.addClass("collapse show"),sets.removeClass("collapse hide"),sets.addClass("collapse show")}function sdmc_rm(){mds.removeClass("collapse hide"),mds.addClass("collapse show"),sds.removeClass("collapse show"),sds.addClass("collapse hide"),sets.removeClass("collapse show"),sets.addClass("collapse hide")}function ftvall(e){for(i=0;i<maOBJ.length;i++)$("#"+maOBJ[i].name).val(e),$("#"+maOBJ[i].name).removeClass("is-invalid").html(),$("#"+maOBJ[i].name).removeClass("is-valid").html()}function ftmpd(){for(i=0;i<maOBJ.length;i++)$("#"+maOBJ[i].name).removeClass("is-invalid").html(),$("#"+maOBJ[i].name).removeClass("is-valid").html()}function spt0(){return $("#esp_tx").val().replace(/^[\n]+$/g,"").split(/[\n]+/)}function smgh(){device.mobile()||$(".bt0st").click()}function erxclr_uart(){$("#esp_tx").val("")}function etxclr_uart(){$("#esp_urx").val(""),str_out1=""}function rm_b(){$(".mc1").removeClass("col-md-8 col-xl-8").html(),$(".bsn0").removeClass("col-md-4 col-xl-4").html(),$(".mc1").removeClass("noscroll collapse hide"),$(".mc1").addClass("col-12").html()}function sh_b(){$(".mc1").remove("col-12").html(),$(".mc1").addClass("col-md-8 col-xl-8").html(),$(".bsn0").addClass("col-md-4 col-xl-4").html()}function rms_b(){$(".bsn0").removeClass("col-12 overlay").html(),$(".mc1").removeClass("noscroll collapse hide")}function shs_b(){$(".bsn0").addClass("col-12 overlay").html(),$(".mc1").addClass("noscroll collapse hide").html()}function sdeb(e){fetch("/debug_mode?input="+encodeURIComponent(e)+"&","GET",txjstmp,10)}function clbtn0(){ast=$(".bt0st").attr("value"),device.mobile()&&("on"!=ast?(shs_b(),sh_b()):(rms_b(),rm_b()),$(".bt0st").click())}function clresf(){ast=$(".bt0st").attr("value"),device.mobile()?"on"==ast?(rms_b(),shs_b()):rms_b():"on"==ast?(rm_b(),sh_b()):rm_b()}function fetch(e,t,s,o){var _=new XMLHttpRequest;_.onloadend=function(){s(_.status,_.responseText)},_.ontimeout=function(){s(-1,null)},_.open(t,e,!0),_.setRequestHeader("Accept","application/json"),_.timeout=200*o,_.send()}function btn_lm75_1s(){$(".btns_lm75_1").removeClass("badge-danger"),$(".btns_lm75_1").removeClass("badge-success"),fetch("/output_lm75_1.json?n="+Math.random(),"GET",txjstmp,10)}function btn_lm75_2s(){$(".btns_lm75_2").removeClass("badge-danger"),$(".btns_lm75_2").removeClass("badge-success"),fetch("/output_lm75_2.json?n="+Math.random(),"GET",txjstmp,10)}function btn_lm75_1(){for(var e,t=0,s=0,o=0,_=0,a=$("#lm75sc_1"),n=$("#lm75so_1"),t=0;t<5&&null!=$("#gLM75ch"+t).val();++t)$("#gLM75ch"+t).prop("checked")&&(s|=1<<t);(o=a.val())<(_=n.val())&&_<0&&o<0?o=_=t=o:o<_&&(t=_,_=o,o=t),o==_&&(_<0&&o<0?_--:o++),a.val(_),n.val(o),$(".lm75thy_1").text(a.val()+" C°"),$(".lm75tos_1").text(n.val()+" C°"),_=parseInt(a.val()),o=parseInt(n.val()),e={lm75_conf:[s,_*=2,o*=2]},fetch("/input_lm75_1.json?n="+encodeURIComponent(JSON.stringify(e))+"&","GET",txjstmp,10)}function btn_lm75_2(){for(var e,t=0,s=0,o=0,_=0,a=$("#lm75sc_2"),n=$("#lm75so_2"),t=0;t<5&&null!=$("#gLM752ch"+t).val();++t)$("#gLM752ch"+t).prop("checked")&&(s|=1<<t);(o=a.val())<(_=n.val())&&_<0&&o<0?o=_=t=o:o<_&&(t=_,_=o,o=t),o==_&&(_<0&&o<0?_--:o++),a.val(_),n.val(o),$(".lm75thy_2").text(a.val()+" C°"),$(".lm75tos_2").text(n.val()+" C°"),_=parseInt(a.val()),o=parseInt(n.val()),e={lm75_conf:[s,_*=2,o*=2]},fetch("/input_lm75_2.json?n="+encodeURIComponent(JSON.stringify(e))+"&","GET",txjstmp,10)}function sub_grad(){maOBJ=$("#tmpo").serializeArray(),fetch("/temp_out.json?n="+Math.random(),"GET",txjstmp,10),$("#temperature").val(j_T.toString().substring(0,6)),$("#humudity").val(j_H.toString().substring(0,6)),$("#pressure").val(j_P.toString().substring(0,6))}function submit_uart(){for($("#btn1").prop("disabled",!0),lines_in=spt0(),url="",uart_json.uart_out="null",ua_mode=$("#uart_get_ch").prop("checked")?1:0,i=0;i<lines_in.length;i++)uart_json.uart_in=lines_in[i],fetch(1==ua_mode?"/uart_get?input="+encodeURIComponent(lines_in[i])+"&":"/uart.json?n="+encodeURIComponent(JSON.stringify(uart_json))+"&","GET",txjs_ua,10)}function txjs_ua(e,t){if(seOBJ=$("#scntf").serializeArray(),$("#btn1").prop("disabled",!1),200!=e)str_out1+="Send command error\n";else{if("string"==typeof t)try{uart_json=JSON.parse(t)}catch(e){return 0}else uart_json.uart_out="null",uart_json.uart_in="null";""==uart_json.uart_out?str_out1+="ACK\n":str_out1+=uart_json.uart_out+"\n"}e=$("#esp_urx");""!=e.val()?e.val(e.val()+str_out1):e.val(str_out1),str_out1=""}sds=$(".sideset"),mds=$(".macnt"),sets=$(".setcnt"),cnftmp=$(".scntf"),$(".bt0st1").click(function(){$(".bt0st").click()}),$(".bt0st").click(function(){ast=$(".bt0st").attr("value"),device.mobile()?"on"!=ast?($(".bt0st").attr("value","on"),rm_b(),rms_b(),shs_b()):($(".bt0st").attr("value","off"),rm_b(),rms_b(),sh_b()):"on"!=ast?($(".bt0st").attr("value","on"),rm_b(),sh_b()):($(".bt0st").attr("value","off"),rm_b())}),$(".swdeb").click(function(){subwdeb=1==this.checked?($(".swdebl").text("Выключить режим настройки"),this.setAttribute("disabled","true"),sdeb("ON"),!0):($(".swdebl").text("Включить режим настройки"),this.setAttribute("disabled","false"),sdeb("OFF"),!1)}),$(window).resize(function(){clresf()}),window.onload=function(){$(".bt0st").attr("value","off"),$(".navia").addClass("list-group-item list-group-item-action bg-light border"),$("#esp_tx").val("wsbuser.prints(node.heap());"),$("#esp_urx").val(""),rs=setInterval(refr_rtc,3e3),i=0,smgh()};
